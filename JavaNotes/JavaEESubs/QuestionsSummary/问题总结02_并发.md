## 问题总结05 ~ 高并发高可用
1. 什么是DNS?

   - 域名系统（DNS）是因特网的电话簿。人类通过域名在线访问信息，如nytimes.com或espn.com。Web浏览器通过Internet协议（IP）地址进行交互。DNS将域名转换为IP地址[，](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/)以便浏览器可以加载Internet资源。

2. 谈一谈Nginx的作用和应用场景.

   - Nginx用的最多的场景是反向代理的路由转发, 负载均衡
   - 虚拟主机
   - http服务器
   - 配置安全管理

3. 什么是反向代理? 反向代理的作用是什么?

   - 正向代理, 就是帮请求的发起方做事情
   - 反向代理, 就是帮请求的受理方做事情, 最多的就是根据配置进行路由转发

4. 说说Nginx的常用配置.

   - upstream
   - proxy_pass

5. 谈一谈KeepAlive.

   - 真是服务器的健康检查
   - Master主机和Backup备机的切换

6. 谈一谈LVS.[参考](https://www.cnblogs.com/klb561/p/9215667.html)

   - LVS是Linux Virtual Server的缩写，意思是Linux虚拟服务器，是一个开源的软件，可以实现传输层四层负载均衡。基于VRRP协议, 即: Virtual Route Redundancy Protocol虚拟路由冗余协议。是一种容错协议，保证当主机的下一跳路由出现故障时，由另一台路由器来代替出现故障的路由器进行工作，从而保持网络通信的连续性和可靠性。

   - LVS调度算法分为静态类型和动态类型，共计10种:

     - 固定调度算法：rr(Round Robin)，wrr(Weight Round Robin)，dh(Destination Hashing)，sh(Source Hashing)
     - 动态调度算法：wlc(Weighted Least-Connection)，lc(Least-Connection)，lblc(Locality-Based Least-Connection)，lblcr(Locality-Based Least-Connection with Replication)

   - LVS调度算法的生产环境选型：

     - 一般的网络服务，如http，mail，mysql等常用的LVS调度算法为：

     ​        a. 基本轮询调度rr

     ​        b. 加权最小连接调度wlc

     ​        c. 加权轮询调度wrc

     - 基于局部性的最小连接lblc和带复制的给予局部性最小连接lblcr主要适用于web cache和DB cache

     - 源地址散列调度SH和目标地址散列调度DH可以结合使用在防火墙集群中，可以保证整个系统的出入口唯一。

7. LVS与KeepAlive的区别.

8. 如何实现双机主从热备?

9. 试着画一下LVS+KeepAlive+Nginx的架构流程图.

10. 项目发布如何不影响到正常用户访问, 从而实现7×24小时不间断访问.

11. 项目如果发生了故障宕机, 应如何处理.

12. 动态网站和静态网站的区别有哪些?

13. 动态页面静态化的作用是什么?

14. 什么是动静分离架构模式?

15. 如何搭建动静分离?

16. 动静分离和前后分离的区别有哪些?

17. 如何控制浏览器静态资源缓存?

18. HTTP状态吗304的作用?

19. 在微服务中,应该如何保护服务?

20. 谈一谈你对Hystrix的理解.

21. Hystrix对系统保护的原理是什么?

    - 通过对服务的降级,熔断和隔离的方式实现的.

22. 服务隔离、降级、熔断、限流分别表达什么意思?
    - **降级**: 在高并发场景下, 防止用户一直等待, 直接返回给用户一个友好的提示(调用fallBack), 这样的操作就是服务降级
    - **熔断**: 高并发场景下, 为了保护服务, 如果请求的并发数量达到一定的数量, 就直接拒绝服务的访问, 这样的操作称为服务的熔断, 结合降级一起使用
    - **隔离**: 高并发的场景下, 为了避免某一个接口被大量触发, 造成其他服务延时等待(不可用), 我们就使用一些技术把这些接口隔离开, 使之互不影响, 实现方式: ①线程池, ②信号量, 具体参见**服务隔离有几种实现方式**
    - **限流**: 高并发环境下, 为了保护服务, 请求的数量要严格限制, 这一操作称为服务限流
    - 解决前三个问题 Hystrix 就可以很好的得到解决, 只需要在需要保护的接口上添加注解@HystrixCommand即可, 添加以后SpringCloud就为该接口开起来降级/隔离/熔断/限流的功能, 阈值需要自己配置
    - 解决限流问题, 主要通过**滑动窗口计数器**/**令牌桶**/**漏桶**, 具体参见**高并发服务限流有哪些算法**

23. 服务隔离有几种实现方式?
    - 实现方式有两种:
      * 线程池
      * 信号量
    - 缺点: 常用的就是线程池的方式, 因为要创建很多的线程池, 所以内存的开销很大

24. 服务隔离的线程池实现方式的原理是什么?

25. Hystrix可以单独集成在项目中吗?

26. Hystrix实现服务的降级有哪些方式?
    - 使用方法的方式: 为每个降级熔断的服务接口单独编写一个方法, 填写在注解(@HystrixCommand)的fallbackMethod参数上
      * 缺点: 降级熔断的这个服务中的所有代码一起在子线程中执行, 而不是只有远程调用在单独的子线程中执行
    - 使用类的方式: 为一类接口(一般是一个Service类)创建一个Fallback类, 这个类实现这个接口的Feign接口, 并实现其中的方法, 方法的实现即返回给用户一些友好的提示代码, 并把这个类配置到注解@FeignClient的fallback参数上即可
      * 优点: 服务中只有远程调用的部分会自动开启单独开启线程执行, 并为这个线程启动降级/熔断/隔离

27. 高并发服务限流有哪些算法?
    - 滑动窗口计数器: 一个窗口内的请求数量达到上限后就不能响应请求, 调用降级方法
    - 令牌桶(RateLimiter+SpringBoot): 令牌桶会被以固定的速率添加令牌, 只要请求能获得令牌就可以响应,否则调用降级方法
    - 漏桶: 漏桶自己以固定的速率流出令牌,以任意的速度添加令牌,当请求来的时候也向漏桶中添加令牌,如果能添加进去(漏桶未满)则可以响应,否则调用降级方法
    - 应用层限流(Nginx.http_limit)
    - 分布式限流

28. 传统计数器限流有哪些弊端?

29. 五种常见的IO模型

    - **BIO**，同步阻塞IO，阻塞整个步骤，如果连接少，他的延迟是最低的，因为一个线程只处理一个连接，适用于少连接且延迟低的场景，比如说数据库连接。
    - **NIO**，同步非阻塞IO，阻塞业务处理但不阻塞数据接收，适用于高并发且处理简单的场景，比如聊天软件。
    - **多路复用IO**，他的两个步骤处理是分开的，也就是说，一个连接可能他的数据接收是线程a完成的，数据处理是线程b完成的，他比BIO能处理更多请求，但是比不上NIO，但是他的处理性能又比BIO更差，因为一个连接他需要两次system call，而BIO只需要一次，所以这种IO模型应用的不多。
    - **信号驱动IO**，这种IO模型主要用在嵌入式开发，不参与讨论。
    - **异步IO**，他的数据请求和数据处理都是异步的，数据请求一次返回一次，适用于长连接的业务场景。